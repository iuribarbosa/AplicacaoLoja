<!DOCTYPE html>
<html lang="pt"
      xmlns="http://www.w3.org/1999/xhtml"   
      xmlns:h="http://java.sun.com/jsf/html"   
      xmlns:f="http://java.sun.com/jsf/core"   
      xmlns:ui="http://java.sun.com/jsf/facelets"   
      xmlns:p="http://primefaces.org/ui">

    <h:head>

        <meta charset="utf-8"/>
        <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
        <meta name="viewport" content="width=device-width, initial-scale=1"/>
        <meta name="description" content=""/>
        <meta name="author" content=""/>

        <title>GerFiz</title>

        <!-- Bootstrap Core CSS -->
        <link href="css/bootstrap.min.css" rel="stylesheet"/>

        <!-- Custom CSS -->
        <link href="css/sb-admin.css" rel="stylesheet"/>

        <!-- Morris Charts CSS -->
        <link href="css/plugins/morris.css" rel="stylesheet"/>

        <!-- Custom Fonts -->
        <link href="font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>

        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

    </h:head>

    <body style="background-color: white; color: black; margin: 0px">
        <h:form id="formPrevia">
            <div class="container-fluid">
                <div class="row titulo">
                    <div class="col-md-10 tituloLabel2">
                        <Strong><b class="tituloLabel">Nome da Loja</b></Strong> <br/> Email: Email da Loja <br/> Logradouro, Nº<br /> Bairro <br/> Cidade, Estado<br /> Telefone: (99) 9999-9999
                    </div>
                    <div class="col-md-2">
                        <br/><br/><strong><b class="tituloLabel2">Vendedor:</b></strong> Nome Vendedor<br/><br/><br/><strong><b class="tituloLabel2">Pedido:</b></strong> Nº Pedido
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12" style="margin-top: 1%">
                        <center><p:outputLabel value="------------------------------------------------------------ Pedido ------------------------------------------------------------"/></center>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <p:panel style="padding-bottom: 5%;">
                            <p:outputPanel autoUpdate="true">
                                <p:dataTable id="listaProdutos" var="prod" selection="#{previaPedido.produtoExc}"  rowKey="#{prod.codprod}"  value="#{previaPedido.produtosInseridos}">
                                    <p:column headerText="ID" width="6%">
                                        <center>#{prod.codprod}</center>  
                                    </p:column>
                                    <p:column headerText="Descrição do Produto" width="62%">
                                        #{prod.nomeprod}
                                    </p:column>
                                    <p:column headerText="Valor" width="8%">
                                        <center>#{prod.valorprodAp}</center>
                                    </p:column>
                                    <p:column headerText="Quant." width="8%">
                                        <center>
                                            #{prod.qtdprod}
                                        </center>
                                    </p:column>
                                    <p:column headerText="Total" width="8%">
                                        <center>#{prod.valorprod}</center>
                                    </p:column>
                                    <p:column headerText="Excluir" width="8%">
                                        <p:commandLink immediate="false">
                                                <center>
                                                <i class="glyphicon glyphicon-remove"></i>
                                                <f:setPropertyActionListener value="#{prod}"  target="#{previaPedido.produtoExc}"/>
                                                <f:ajax listener="#{previaPedido.excluirProduto()}" />
                                                </center>
                                            </p:commandLink>
                                    </p:column>
                                </p:dataTable>
                            </p:outputPanel>
                            <a onclick="javascript:popUp('Produtos', '#{request.contextPath}/faces/Pesq_ProdPed.xhtml', '800', '1000'); return false;">
                                <img class="img-responsive" style="float: right; margin-top: 1%; width: 30px; height: auto;" src="img/Botoes/add.png"/>
                            </a>
                        </p:panel>
                    </div>
                </div>
                <div class="row marginTable">
                    <div class="col-md-6">
                        <br/><br/><br/><center><p:commandButton value="Cancelar" style="margin-right: 2%"/>  <p:commandButton value="Concluir"/></center>
                    </div>
                    <div class="col-md-2 ">
                        <p:panel id="formaPag">
                            <h:form>
                                <p:outputLabel value="Forma de Pagamento"/>
                                <h:panelGrid columns="2">

                                    <p:selectOneRadio   value="#{previaPedido.formaPag}" layout="grid" columns="1">
                                        <f:selectItem itemLabel="  Avista" itemValue="1"/>
                                        <f:selectItem itemLabel="  A Prazo" itemValue="2"/>
                                        <p:ajax event="change" update="formPrevia" listener="#{previaPedido.verificarFormaPag()}"/>
                                    </p:selectOneRadio>
                                    <p:outputLabel/>
                                    <p:selectOneMenu id="parcelas" required="true" requiredMessage="Informe a Quantidade de Parcelas" rendered="#{previaPedido.cntParcelas}" value="#{previaPedido.parcelas}" class="drop">
                                        <f:selectItem noSelectionOption="true" itemLabel=" "/>
                                        <f:selectItem itemLabel="2x" itemValue="2"/>
                                        <f:selectItem itemLabel="3x" itemValue="3"/>
                                        <f:selectItem itemLabel="4x" itemValue="4"/>
                                        <f:selectItem itemLabel="5x" itemValue="5"/>
                                        <f:selectItem itemLabel="6x" itemValue="6"/>
                                        <p:ajax event="change" update="formPrevia" listener="#{previaPedido.gerarValorParcelas()}"/>
                                    </p:selectOneMenu>
                                </h:panelGrid>
                            </h:form>
                        </p:panel>
                    </div>
                    <div class="col-md-2">
                        <p:panel>
                            <p:outputLabel value="Descontos"/><br/>
                            <center>
                                <p:inputNumber value="#{previaPedido.desconto}" symbol="%" symbolPosition="s" decimalPlaces="1" size="2" maxlength="2">
                                    <p:ajax update="cmpDesconto" event="change" listener="#{previaPedido.gerarValorDesconto()}"/>
                                    <p:ajax update="cmpDesconto" event="keyup" listener="#{previaPedido.gerarValorDesconto()}"/>
                                </p:inputNumber>
                            </center>
                        </p:panel>
                    </div>
                    <div class="col-md-2">
                        <p:panel>
                            <h:panelGrid columns="1">
                                <p:outputLabel value="Total" />
                                <p:outputLabel value="#{previaPedido.totalString}"/>
                                <p:outputLabel value="Total C/ Desconto"/>
                                <p:outputLabel  id="cmpDesconto" value="#{previaPedido.totalDescontoString}"/>
                                <p:outputLabel value="Quant. Parcelas" rendered="#{previaPedido.cntParcelas}"/>
                                <p:outputLabel value="#{previaPedido.parcelas}" rendered="#{previaPedido.cntParcelas}"/>
                                <p:outputLabel value="Parcelas" rendered="#{previaPedido.cntParcelas}"/>
                                <p:outputLabel value="#{previaPedido.valorParcelasString}" rendered="#{previaPedido.cntParcelas}"/>
                            </h:panelGrid>
                        </p:panel>
                    </div>

                </div>
                <p:outputLabel/>
            </div>
        </h:form>
        <script language="javascript">

            function popUp(titulo, URL, h, w) {

                var winl = (screen.width - w) / 2;

                var wint = (screen.height - h) / 2;

                var newwindow = window.open(URL, titulo, 'top=' + wint + ', left=' + winl + ', width=' + w + ', height=' + h + ', toolbar=no,directories=no, scrollbars=no, status=no, resizable=no, modal=yes');
                newwindow.moveTo(winl, wint);
                newwindow.focus();

            }

            function modalWin2(URL) {

                if (window.showModalDialog) {
                    window.showModalDialog(URL, 'name', 'dialogWidth:255px;dialogHeight:250px');
                } else {
                    window.open(URL, 'name', 'height=255,width=250,toolbar=no,directories=no,status=no,continued from previous linemenubar=no,scrollbars=no,resizable=no ,modal=yes');
                }
            }

            function modalWin(titulo, URL, h, w) {
                var winl = (screen.width - w) / 2;

                var wint = (screen.height - h) / 2;

                if (window.showModalDialog) {
                    var newwindow = window.showModalDialog(URL, titulo, 'dialogTop=' + wint + ', dialogLeft=' + winl + ', dialogWidth:' + w + ', dialogHeight:' + h + ', center:yes;');
                } else {
                    var newwindow = window.open(URL, titulo, 'top=' + wint + ', left=' + winl + ', width=' + w + ', height=' + h + ',toolbar=yes,directories=no,status=no,continued from previous linemenubar=no,scrollbars=no,resizable=no ,modal=yes');
                }
                newwindow.moveTo(winl, wint);
                newwindow.focus();
            }

        </script>
    </body>

</html>
